<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Vodafone Wordsearch</title>
<style>
:root{
  --voda-red:#E60000; --bg:#0c0d10; --panel:#14161a; --muted:#9aa0a6;
  --grid:#2b2e33; --good:#16a34a; --bad:#dc2626; --chip:#1f2226;
}
*{box-sizing:border-box;}
body{margin:0;background:var(--bg);color:#fff;font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;}
.container{max-width:1200px;margin:0 auto;padding:16px;}
.topbar{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;margin-bottom:12px;}
.brand{display:flex;gap:12px;align-items:center;}
.logo{width:40px;height:40px;border-radius:50%;background:var(--voda-red);}
.title{font-weight:900;font-size:22px;}
.toolbar{display:flex;gap:8px;flex-wrap:wrap;align-items:center;}
.btn, #hudTimer {
  border:none;
  padding:8px 12px;
  border-radius:10px;
  font-weight:700;
  cursor:pointer;
  background:var(--voda-red);
  color:#fff;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  white-space:nowrap;
}
.card{background:var(--panel);border:1px solid #24262b;border-radius:14px;margin-bottom:12px;}
.card-header{padding:12px 14px;border-bottom:1px solid #24262b;font-weight:800;}
.card-content{padding:14px;}
.grid{display:grid;gap:0;user-select:none;}
.cell{width:36px;height:36px;display:flex;align-items:center;justify-content:center;font-weight:900;font-size:16px;
      border:1px solid #24262b;cursor:pointer;background:#101217;color:#e9eaed;}
.cell.sel{background:rgba(230,0,0,0.25);}
.cell.found{background:var(--voda-red);color:#fff;}
.list{list-style:none;padding:0;margin:0;display:grid;gap:6px;}
.list li{padding:6px;border:1px solid #2a2c31;border-radius:8px;background:#0f1013;}
.list li.found{color:var(--muted);text-decoration:line-through;}
.bank{display:flex;gap:8px;flex-wrap:wrap;padding:8px;border:1px dashed #2a2c31;border-radius:10px;background:#0c0d10;}
.chip{min-width:36px;height:36px;display:flex;align-items:center;justify-content:center;font-weight:900;border-radius:6px;background:var(--chip);}
.slots{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px;}
.slot{width:44px;height:44px;border:2px dashed #2a2c31;display:flex;align-items:center;justify-content:center;font-size:20px;color:#6b7280;border-radius:8px;}
.slot.fill{border-style:solid;color:#fff;background:#1a1c20;}

/* Fixed bottom leaderboard */
.leaderboard {
  position: fixed;
  bottom: 10px;
  left: 50%;
  transform: translateX(-50%);
  width: 95%;
  max-width: 1200px;
  background: var(--panel);
  border-radius: 12px;
  padding: 12px;
  z-index: 999;
  overflow-y:auto;
  max-height:180px;
}
.leader-title {
  font-weight: 800;
  margin-bottom: 6px;
  font-size: 18px;
}
.leader-row {
  background: var(--chip);
  padding: 6px 10px;
  border-radius: 8px;
  margin-top: 4px;
  font-size: 14px;
  display:flex;
  justify-content:space-between;
}
.leader-row.current {
  background: var(--voda-red);
  color:#fff;
}

/* QR Code */
#qrPanel {
  position: fixed;
  top: 10px;
  left: 10px;
  z-index: 999;
  background:#fff;
  padding:8px;
  border-radius:8px;
  text-align:center;
  box-shadow:0 0 10px rgba(0,0,0,0.2);
}
#qrPanel div { margin-top:4px; font-size:12px; color:#555; }
</style>
</head>
<body>

<!-- QR Code -->
<div id="qrPanel">
  <div id="qrcode"></div>
  <div>ðŸ“± Scan Me</div>
</div>

<div class="container">
  <!-- Topbar -->
  <div class="topbar">
    <div class="brand">
      <div class="logo"></div>
      <div class="title">Vodafone Wordsearch</div>
    </div>
    <div class="toolbar">
      <button class="btn" id="btnShuffle">Shuffle</button>
      <button class="btn" id="btnStart">Start</button>
      <button class="btn" id="btnStop">Stop</button>
      <button class="btn" id="btnReset">Reset</button>
      <button class="btn" id="btnNewPlayer">Add Player</button>
      <button class="btn" id="btnNewTeam">Add Team</button>
      <span id="hudTimer">10:00</span>
    </div>
  </div>

  <!-- Puzzle Section -->
  <div class="card">
    <div class="card-header">Puzzle</div>
    <div class="card-content" style="display:flex; gap:24px; align-items:flex-start;">
      <div class="grid" id="grid"></div>
      <div style="min-width:200px;">
        <div class="card">
          <div class="card-header">Final Phrase</div>
          <div class="card-content">
            <div class="bank" id="bank"></div>
            <div class="slots" id="slotsWrap"></div>
          </div>
        </div>
        <div class="card">
          <div class="card-header">Words to Find</div>
          <div class="card-content">
            <ul class="list" id="wordList"></ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Fixed Bottom Leaderboard -->
<div class="leaderboard">
  <div class="leader-title">Leaderboard</div>
  <div id="leader"></div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<script>
// QR Code
new QRCode(document.getElementById("qrcode"), {
    text: "https://saturncapricornsquid.github.io/CSANDLCA/",
    width: 120,
    height: 120,
    colorDark : "#E60000",
    colorLight : "#ffffff",
    correctLevel : QRCode.CorrectLevel.H
});

// Game Config
const GRID_SIZE = 15;
const WORDS = [
  {word:"CORE", hint:"Backbone"},
  {word:"SITETRACKER", hint:"Tool"},
  {word:"ALLOCATION", hint:"Assigning"}
];
const TARGET_PHRASE = "CSANDLCA";

// Players & Turn
let players = [
  {name:"Player 1", points:0},
  {name:"Player 2", points:0}
];
let currentPlayerIndex = 0;

// Board State
let board = [], placedWords=[], slotLetters=Array.from(TARGET_PHRASE, ch=>ch===' '? ' ': '');

// Utils
const $ = id => document.getElementById(id);
function rand(n){return Math.floor(Math.random()*n);}
function shuffle(a){for(let i=a.length-1;i>0;i--){const j=rand(i+1);[a[i],a[j]]=[a[j],a[i]];}return a;}
function fmtTime(sec){return String(Math.floor(sec/60)).padStart(2,'0')+":"+String(sec%60).padStart(2,'0');}

// Board
function newBoard(){
  board = Array.from({length:GRID_SIZE}, ()=>Array.from({length:GRID_SIZE}, ()=>({letter:String.fromCharCode(65+rand(26)), found:false})));
  renderBoard(); renderWords(); renderSlots(); renderBank(); updateLeaderboard();
}

function renderBoard(){
  const g=$("grid"); g.style.gridTemplateColumns=`repeat(${GRID_SIZE},36px)`; g.innerHTML="";
  board.forEach((row,r)=>row.forEach((cell,c)=>{
    const d=document.createElement("div"); d.className="cell"; d.dataset.r=r; d.dataset.c=c; d.textContent=cell.letter;
    d.onclick = ()=>selectCell(r,c);
    g.appendChild(d);
  }));
}

function renderWords(){ const ul=$("wordList"); ul.innerHTML=""; WORDS.forEach(w=>{ const li=document.createElement("li"); li.textContent=w.word+" â€” "+w.hint; ul.appendChild(li); }); }
function renderSlots(){ const wrap=$("slotsWrap"); wrap.innerHTML=""; slotLetters.forEach(ch=>{ const d=document.createElement("div"); d.className="slot"+(ch?" fill":""); d.textContent=ch||""; wrap.appendChild(d); }); }
function renderBank(){ $("bank").innerHTML=""; }

// Leaderboard
function updateLeaderboard(){
  const leader=$("leader"); leader.innerHTML="";
  players.forEach((p,i)=>{
    const row=document.createElement("div"); row.className="leader-row"+(i===currentPlayerIndex?" current":"");
    row.innerHTML=`<span>${p.name}</span><span>${p.points} pts</span>`;
    leader.appendChild(row);
  });
}

// Timer
let timeRemaining=600, gameTimer=null;
function startTimer(){clearInterval(gameTimer); gameTimer=setInterval(()=>{ $("hudTimer").textContent=fmtTime(timeRemaining); timeRemaining--; if(timeRemaining<0)clearInterval(gameTimer); },1000);}
function stopTimer(){clearInterval(gameTimer);}
function resetTimer(){clearInterval(gameTimer); timeRemaining=600; $("hudTimer").textContent="10:00";}

// Word Selection
function selectCell(r,c){
  const cell = board[r][c];
  if(!cell.found){
    cell.found=true;
    players[currentPlayerIndex].points += 1; // 1 pt per letter
    currentPlayerIndex = (currentPlayerIndex+1) % players.length; // next turn
    renderBoard(); updateLeaderboard();
  }
}

// Buttons
$("btnShuffle").onclick=newBoard;
$("btnStart").onclick=startTimer;
$("btnStop").onclick=stopTimer;
$("btnReset").onclick=()=>{resetTimer(); newBoard();};

// Init
newBoard();
</script>
</body>
</html>

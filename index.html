<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Vodafone Wordsearch — Multiplayer</title>
<style>
  :root{
    --voda-red:#E60000; --bg:#0c0d10; --panel:#14161a; --muted:#9aa0a6;
    --grid:#2b2e33; --good:#16a34a; --bad:#dc2626; --chip:#1f2226;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:var(--bg);color:#fff;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
  .container{max-width:1200px;margin:0 auto;padding:16px}
  .topbar{display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:wrap;margin-bottom:12px}
  .brand{display:flex;gap:12px;align-items:center}
  .logo{width:40px;height:40px;border-radius:999px;background:var(--voda-red)}
  .title{font-weight:900;font-size:22px}
  .subtitle{color:var(--muted);font-size:13px}
  .row{display:grid;grid-template-columns:1fr 420px;gap:16px}
  @media (max-width:1080px){.row{grid-template-columns:1fr}}
  .card{background:var(--panel);border:1px solid #24262b;border-radius:14px}
  .card-header{padding:12px 14px;display:flex;align-items:center;justify-content:space-between}
  .card-title{font-weight:800}
  .card-content{padding:12px 14px 14px}
  .toolbar{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
  .btn{appearance:none;border:1px solid #2a2c31;background:#1a1c20;color:#fff;cursor:pointer;padding:9px 12px;border-radius:12px;font-weight:800}
  .btn-primary{background:var(--voda-red);border-color:var(--voda-red)}
  .btn:disabled{opacity:.5;cursor:default}
  .pill{padding:6px 10px;border-radius:999px;font-size:12px;border:1px solid #2a2c31;background:#121317}
  .grid-wrap{display:inline-block;padding:8px;border-radius:12px;border:1px solid #24262b;background:#0f1013}
  .grid{display:grid;gap:0;user-select:none;touch-action:none;background:var(--grid)}
  .cell{width:32px;height:32px;display:flex;align-items:center;justify-content:center;
        font-weight:900;font-size:16px;color:#e9eaed;background:#101217;
        border-right:1px solid #24262b;border-bottom:1px solid #24262b;cursor:pointer;}
  @media (min-width:600px){.cell{width:40px;height:40px;font-size:18px}}
  .cell.found{background:var(--voda-red);color:#fff}
  .list{list-style:none;margin:0;padding:0;display:grid;gap:8px}
  .list li{padding:10px;border:1px solid #2a2c31;border-radius:12px;background:#0f1013}
  .list li.found div{color:var(--muted);text-decoration:line-through}
  .hint{font-size:12px;color:var(--muted);margin-top:4px}
  .leader{display:grid;gap:8px}
  .leader-row{display:flex;justify-content:space-between;align-items:center;padding:8px;border:1px solid #2a2c31;border-radius:10px;background:#0f1013}
  .winner-banner{position:fixed;bottom:0;left:0;right:0;background:var(--voda-red);color:#fff;font-weight:900;font-size:16px;text-align:center;padding:8px;z-index:99}
  #qrPanel{position:fixed;top:10px;left:10px;z-index:999;background:#fff;padding:6px;border-radius:8px;box-shadow:0 0 10px rgba(0,0,0,0.2);text-align:center;width:120px}
  #qrPanel img{width:100%;height:auto}
  #grid.locked{filter:blur(6px);pointer-events:none}
</style>
</head>
<body>
<div id="qrPanel">
  <div id="qrcode"></div>
  <div style="font-size:11px;color:#333;margin-top:2px;">Scan Me</div>
  <button class="btn btn-primary" style="margin-top:4px;font-size:11px;padding:4px 6px;" onclick="unlockGrid()">Unlock</button>
</div>

<div id="winnerBanner" class="winner-banner" style="display:none;"></div>

<div class="container">
  <div class="topbar">
    <div class="brand">
      <div class="logo"></div>
      <div>
        <div class="title">Vodafone Wordsearch</div>
        <div class="subtitle">Multiplayer Challenge</div>
      </div>
    </div>
    <div class="toolbar">
      <button class="btn" id="btnShuffle">Shuffle</button>
      <button class="btn btn-primary" id="btnStart">Start</button>
      <button class="btn" id="btnStop">Stop</button>
      <button class="btn" id="btnReset">Reset</button>
      <button class="btn" id="btnNewPlayer">Add Player</button>
      <button class="btn" id="btnNewTeam">Add Team</button>
      <span class="pill">Words left: <span id="hudLeft">0</span></span>
      <span class="pill">Time: <span id="hudTimer">10:00</span></span>
    </div>
  </div>

  <div class="row">
    <div class="card">
      <div class="card-header"><div class="card-title">Puzzle</div></div>
      <div class="card-content">
        <div style="margin-top:0;font-weight:900">Leaderboard</div>
        <div class="leader" id="leader"></div>
        <div style="margin-top:12px;font-weight:900">Teams</div>
        <div id="teamList" class="leader"></div>
        <div style="margin-top:12px;font-weight:900">Players</div>
        <div id="playerList" class="leader"></div>
        <div class="grid-wrap"><div id="grid" class="grid locked"></div></div>
      </div>
    </div>
    <div class="card">
      <div class="card-header"><div class="card-title">Info Panel</div></div>
      <div class="card-content">
        <div style="margin-top:12px;font-weight:900">Final Phrase</div>
        <div id="slotsWrap" style="display:flex;gap:4px;flex-wrap:wrap;margin:8px 0"></div>
        <div style="margin-top:12px;font-weight:900">Words to Find</div>
        <ul id="wordList" class="list"></ul>
      </div>
    </div>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<script>
const GRID_SIZE=15;
const WORDS=[
 {word:"CORE",hint:"Backbone of the network layer that sits beyond access"},
 {word:"SITETRACKER",hint:"The deployment operations tool used for projects, milestones and dashboards."},
 {word:"ALLOCATION",hint:"Which activity involves assigning responsibilities or resources?"},
 {word:"NCT",hint:"System used by all regions to allocate sites to INOC (abbr.)."},
 {word:"DELIVERY",hint:"Phase where circuits are provisioned, site handed over."},
 {word:"LCA",hint:"Team responsible for pre-build before go live (abbr.)."},
 {word:"CRQ",hint:"Formal change request code (abbr.)."},
 {word:"AUDIT",hint:"Action to ensure accurate site data before deployment."},
 {word:"TESTING",hint:"Verifying new configuration behaves as expected."},
 {word:"ESCALATION",hint:"Raising a fault or issue to higher-level support."},
 {word:"ACHIEVEMENTS",hint:"Successful delivery milestone or critical resolution."},
 {word:"METRIC",hint:"Performance indicators for rollout, faults, uptime."},
 {word:"TEAM",hint:"Group of players working together."}
];
const TARGET_PHRASE="CSANDLCA";

let board=[],placedWords=[],players=[],teams=[];
let bankLetters=[],slotLetters=Array.from(TARGET_PHRASE,ch=>ch===' ' ? ' ' : '');
let roundActive=false,timeRemaining=600,gameTimer=null;

function unlockGrid(){document.getElementById("grid").classList.remove("locked");}

new QRCode(document.getElementById("qrcode"),{
  text:"https://saturncapricornsquid.github.io/CSANDLCA/",
  width:100,height:100,
  colorDark:"#E60000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H
});

// Helpers
const $=id=>document.getElementById(id);
const rand=n=>Math.floor(Math.random()*n);
function shuffle(a){for(let i=a.length-1;i>0;i--){const j=rand(i+1);[a[i],a[j]]=[a[j],a[i]];}return a;}
function fmtTime(sec){const m=String(Math.floor(sec/60)).padStart(2,'0');const s=String(sec%60).padStart(2,'0');return `${m}:${s}`;}

function newBoard(){
  board=Array.from({length:GRID_SIZE},()=>Array.from({length:GRID_SIZE},()=>({letter:'',found:false})));
  placedWords=[];
  WORDS.forEach(w=>placeWord(w.word));
  for(let r=0;r<GRID_SIZE;r++){for(let c=0;c<GRID_SIZE;c++){if(!board[r][c].letter)board[r][c].letter=String.fromCharCode(65+rand(26));}}
  renderBoard();renderWords();
}
function placeWord(word){
  const dirs=[[0,1],[1,0],[1,1],[1,-1],[0,-1],[-1,0],[-1,-1],[-1,1]];shuffle(dirs);
  for(let attempt=0;attempt<400;attempt++){
    const[dr,dc]=dirs[attempt%dirs.length];const r0=rand(GRID_SIZE),c0=rand(GRID_SIZE);const cells=[];let ok=true;
    for(let i=0;i<word.length;i++){const r=r0+dr*i,c=c0+dc*i;if(r<0||c<0||r>=GRID_SIZE||c>=GRID_SIZE){ok=false;break;}
      const cell=board[r][c];if(cell.letter&&cell.letter!==word[i]){ok=false;break;}cells.push({r,c});}
    if(ok){cells.forEach((p,i)=>board[p.r][p.c].letter=word[i]);placedWords.push({word,cells,found:false});return true;}
  }return false;
}
function renderBoard(){
  const g=$("grid");g.style.gridTemplateColumns=`repeat(${GRID_SIZE},1fr)`;g.innerHTML="";
  for(let r=0;r<GRID_SIZE;r++){for(let c=0;c<GRID_SIZE;c++){const d=document.createElement("div");d.className="cell";d.dataset.r=r;d.dataset.c=c;d.textContent=board[r][c].letter;if(board[r][c].found)d.classList.add("found");g.appendChild(d);}}
}
function renderWords(){
  const ul=$("wordList");ul.innerHTML="";
  placedWords.forEach(w=>{const li=document.createElement("li");if(w.found)li.classList.add("found");li.innerHTML=`<div><div style="font-weight:900">${w.word}</div><div class="hint">${WORDS.find(x=>x.word===w.word).hint}</div></div>`;ul.appendChild(li);});
  $("hudLeft").textContent=placedWords.filter(w=>!w.found).length;
}
function renderSlots(){
  const wrap=$("slotsWrap");wrap.innerHTML="";
  Array.from(TARGET_PHRASE).forEach((ch,i)=>{const slot=document.createElement("div");slot.textContent=slotLetters[i]||"_";slot.style.cssText="width:32px;height:32px;display:flex;align-items:center;justify-content:center;background:#222;border-radius:6px;font-weight:900";wrap.appendChild(slot);});
}

// Timer
function startTimer(){clearInterval(gameTimer);timeRemaining=600;roundActive=true;updateHUD();gameTimer=setInterval(()=>{timeRemaining--;updateHUD();if(timeRemaining<=0){clearInterval(gameTimer);roundActive=false;alert("⏱ Time's up!");}},1000);}
function stopTimer(){clearInterval(gameTimer);roundActive=false;}
function resetRound(){clearInterval(gameTimer);roundActive=false;timeRemaining=600;players.forEach(p=>p.score=0);teams.forEach(t=>t.score=0);newBoard();renderSlots();renderLeader();updateHUD();}
function updateHUD(){$("hudTimer").textContent=fmtTime(timeRemaining);}

function renderLeader(){
  const L=$("leader");L.innerHTML="";
  const ranking=[...players].sort((a,b)=>b.score-a.score);
  ranking.forEach((p,i)=>{const row=document.createElement("div");row.className="leader-row";row.innerHTML=`<div>${i+1}. ${p.name||'Player'} (${teams.find(t=>t.id===p.teamId)?.name||'No Team'})</div><div>${p.score}</div>`;L.appendChild(row);});
}
function addPlayer(){players.push({id:Date.now()+""+rand(99),name:"Player"+(players.length+1),teamId:null,score:0});renderLeader();}
function addTeam(){teams.push({id:Date.now()+""+rand(99),name:"Team"+(teams.length+1),score:0});renderLeader();}

$("btnShuffle").onclick=newBoard;
$("btnStart").onclick=startTimer;
$("btnStop").onclick=stopTimer;
$("btnReset").onclick=resetRound;
$("btnNewPlayer").onclick=addPlayer;
$("btnNewTeam").onclick=addTeam;

function boot(){newBoard();renderSlots();renderLeader();updateHUD();}
boot();
</script>
</body>
</html>

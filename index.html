<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Vodafone Wordsearch â€” Multiplayer</title>
<style>
  :root{
    --voda-red:#E60000; --bg:#0c0d10; --panel:#14161a; --muted:#9aa0a6;
    --grid:#2b2e33; --good:#16a34a; --bad:#dc2626; --chip:#1f2226;
  }
  *{box-sizing:border-box;margin:0;padding:0}
  body{background:var(--bg);color:#fff;font-family:Inter,system-ui,sans-serif}
  .container{max-width:1200px;margin:0 auto;padding:12px}
  .topbar{display:flex;flex-wrap:wrap;gap:8px;align-items:center;justify-content:space-between;margin-bottom:12px}
  .brand{display:flex;align-items:center;gap:8px}
  .logo{width:40px;height:40px;border-radius:50%;background:var(--voda-red)}
  .title{font-weight:900;font-size:22px}
  .subtitle{font-size:12px;color:var(--muted)}
  .toolbar{display:flex;gap:6px;flex-wrap:wrap}
  .btn{padding:6px 10px;border-radius:8px;border:1px solid #333;background:#1a1c20;color:#fff;font-weight:700;cursor:pointer}
  .btn-primary{background:var(--voda-red);border-color:var(--voda-red)}
  .pill{padding:4px 8px;border-radius:999px;background:#121317;font-size:12px}
  .row{display:grid;grid-template-columns:1fr 360px;gap:12px}
  @media(max-width:900px){.row{grid-template-columns:1fr}}
  .card{background:var(--panel);border-radius:12px;border:1px solid #2a2c31}
  .card-header{padding:10px 12px;font-weight:800;border-bottom:1px solid #222}
  .card-content{padding:12px}
  .grid-wrap{overflow:auto;justify-content:center;display:flex}
  .grid{display:grid;background:var(--grid)}
  .cell{width:32px;height:32px;display:flex;align-items:center;justify-content:center;font-weight:900;font-size:14px;
        background:#101217;color:#e9eaed;border:1px solid #24262b;user-select:none}
  .cell.sel{background:rgba(230,0,0,.22)}
  .cell.hit{background:rgba(22,163,74,.65)!important;color:#fff}
  .cell.miss{background:rgba(220,38,38,.65)!important;color:#fff}
  .cell.found{background:var(--voda-red)!important;color:#fff}
  .list{list-style:none;display:grid;gap:6px}
  .list li{padding:6px;border:1px solid #2a2c31;border-radius:8px;font-size:13px;background:#0f1013}
  .list li.found{color:var(--muted);text-decoration:line-through}
  .hint{font-size:11px;color:var(--muted)}
  .leader{display:grid;gap:6px}
  .leader-row{padding:6px;border:1px solid #2a2c31;border-radius:8px;display:flex;justify-content:space-between;font-size:13px;background:#0f1013}
  .bank{display:flex;flex-wrap:wrap;gap:6px;min-height:44px;padding:6px;border:1px dashed #333;border-radius:8px}
  .chip{width:36px;height:36px;display:flex;align-items:center;justify-content:center;border-radius:6px;background:var(--chip);font-weight:900}
  .chip[draggable=true]{cursor:grab}
  .slots{display:flex;flex-wrap:wrap;gap:6px;justify-content:center;margin-top:6px}
  .slot{width:42px;height:42px;border:2px dashed #333;border-radius:6px;display:flex;align-items:center;justify-content:center;font-weight:900;font-size:16px;color:#6b7280}
  .slot.fill{border-style:solid;color:#fff}
  .slots.correct .slot{border-color:var(--good)}
  .slots.wrong .slot{border-color:var(--bad)}
  #qrPanel{position:fixed;top:8px;left:8px;z-index:999;background:#fff;padding:6px;border-radius:8px;text-align:center}
  #qrPanel canvas{width:100px;height:100px}
  #qrLabel{font-size:11px;color:#555;margin-top:2px}
  #winnerBanner{display:none;background:var(--voda-red);padding:10px;text-align:center;font-weight:900;font-size:16px}
</style>
</head>
<body>
<div id="qrPanel">
  <div id="qrcode"></div>
  <div id="qrLabel">ðŸ“± Scan me</div>
</div>
<div id="winnerBanner"></div>
<div class="container">
  <div class="topbar">
    <div class="brand">
      <div class="logo"></div>
      <div>
        <div class="title">Vodafone Wordsearch</div>
        <div class="subtitle">Multiplayer â€¢ Hidden Final Phrase</div>
      </div>
    </div>
    <div class="toolbar">
      <button class="btn" id="btnShuffle">Shuffle</button>
      <button class="btn btn-primary" id="btnStart">Start</button>
      <button class="btn" id="btnStop">Stop</button>
      <button class="btn" id="btnReset">Reset</button>
      <button class="btn" id="btnNewPlayer">Add Player</button>
      <button class="btn" id="btnNewTeam">Add Team</button>
      <span class="pill">Words left: <span id="hudLeft"></span></span>
      <span class="pill">Time: <span id="hudTimer"></span></span>
      <span class="pill">Best: <span id="hudBest"></span></span>
    </div>
  </div>
  <div class="row">
    <div class="card">
      <div class="card-header">Puzzle</div>
      <div class="card-content">
        <div style="font-weight:900;margin-bottom:4px;">Leaderboard</div>
        <div id="leader" class="leader"></div>
        <div style="margin-top:8px;font-weight:900">Teams</div>
        <div id="teamList" class="leader"></div>
        <div style="margin-top:8px;font-weight:900">Players</div>
        <div id="playerList" class="leader"></div>
        <div class="grid-wrap"><div id="grid" class="grid"></div></div>
      </div>
    </div>
    <div class="card">
      <div class="card-header">Info</div>
      <div class="card-content">
        <div style="font-weight:900">Final Phrase</div>
        <div id="bank" class="bank"></div>
        <div id="slotsWrap" class="slots"></div>
        <div style="margin-top:8px;font-weight:900">Words to Find</div>
        <ul id="wordList" class="list"></ul>
      </div>
    </div>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<script>
/* ========= Config ========= */
const GRID_SIZE=15;
const WORDS=[
 {word:"CORE",hint:"Backbone of the network layer that sits beyond access"},
 {word:"SITETRACKER",hint:"Deployment operations tool for projects, milestones and dashboards"},
 {word:"ALLOCATION",hint:"Assigning specific responsibilities or resources to a deployment task"},
 {word:"NCT",hint:"System used by all regions to allocate sites to INOC (abbr.)"},
 {word:"DELIVERY",hint:"Phase where circuits are provisioned and site is handed over"},
 {word:"LCA",hint:"Team responsible for pre-build setup before a site goes live (abbr.)"},
 {word:"CRQ",hint:"Formal change request code used in delivery/go live processes (abbr.)"},
 {word:"AUDIT",hint:"Action to ensure accurate site data before deployment"},
 {word:"TEAM",hint:"Working together as one Vodafone"},
 {word:"TESTING",hint:"Ensuring correct functionality before launch"},
 {word:"ESCALATION",hint:"Process of raising issues to higher levels"},
 {word:"ACHIEVEMENT",hint:"Successful delivery milestone"},
 {word:"METRIC",hint:"Measurement standard for performance or success"}
];
const TARGET="CSANDLCATEAM";

/* ========= State ========= */
let board=[],placedWords=[];
let bankLetters=[];let slotLetters=Array.from(TARGET,()=> "");
let players=[],teams=[];
let time=600,timer=null,best=null;

/* ========= Helpers ========= */
const $=id=>document.getElementById(id);
const rand=n=>Math.floor(Math.random()*n);
function shuffle(a){for(let i=a.length-1;i>0;i--){let j=rand(i+1);[a[i],a[j]]=[a[j],a[i]]}return a;}
function fmt(s){return String(Math.floor(s/60)).padStart(2,'0')+":"+String(s%60).padStart(2,'0');}

/* ========= Board ========= */
function newBoard(){
  board=Array.from({length:GRID_SIZE},()=>Array.from({length:GRID_SIZE},()=>({letter:"",found:false})));
  placedWords=[];
  WORDS.forEach(w=>placeWord(w.word));
  for(let r=0;r<GRID_SIZE;r++)for(let c=0;c<GRID_SIZE;c++)if(!board[r][c].letter)board[r][c].letter=String.fromCharCode(65+rand(26));
  renderBoard();renderWords();updateHUD();
}
function placeWord(word){
  const dirs=[[0,1],[1,0],[1,1],[1,-1],[0,-1],[-1,0],[-1,-1],[-1,1]];
  shuffle(dirs);
  for(let a=0;a<500;a++){
    const [dr,dc]=dirs[a%dirs.length];const r0=rand(GRID_SIZE),c0=rand(GRID_SIZE);let cells=[],ok=true;
    for(let i=0;i<word.length;i++){let r=r0+dr*i,c=c0+dc*i;if(r<0||c<0||r>=GRID_SIZE||c>=GRID_SIZE){ok=false;break}
      let cell=board[r][c];if(cell.letter&&cell.letter!==word[i]){ok=false;break}cells.push({r,c})}
    if(ok){cells.forEach((p,i)=>board[p.r][p.c].letter=word[i]);placedWords.push({word,cells,found:false});return}
  }
}

/* ========= Render ========= */
function renderBoard(){
  const g=$("grid");g.innerHTML="";g.style.gridTemplateColumns=`repeat(${GRID_SIZE},32px)`;
  for(let r=0;r<GRID_SIZE;r++)for(let c=0;c<GRID_SIZE;c++){const d=document.createElement("div");
    d.className="cell";d.dataset.r=r;d.dataset.c=c;d.textContent=board[r][c].letter;if(board[r][c].found)d.classList.add("found");g.appendChild(d)}
}
function renderWords(){
  const ul=$("wordList");ul.innerHTML="";
  placedWords.forEach(w=>{const li=document.createElement("li");if(w.found)li.classList.add("found");
    li.innerHTML=`<div style="font-weight:900">${w.word}</div><div class="hint">${WORDS.find(x=>x.word===w.word).hint}</div>`;ul.appendChild(li)});
}
function renderLeader(){
  const L=$("leader");L.innerHTML="";[...players].sort((a,b)=>b.score-a.score).forEach((p,i)=>{let row=document.createElement("div");row.className="leader-row";row.innerHTML=`${i+1}. ${p.name||"Player"} â€” ${p.score}`;L.appendChild(row)});
  const T=$("teamList");T.innerHTML="";teams.forEach(t=>{let row=document.createElement("div");row.className="leader-row";row.innerHTML=`${t.name||"Team"} â€” ${t.score}`;T.appendChild(row)});
  const P=$("playerList");P.innerHTML="";players.forEach(p=>{let row=document.createElement("div");row.className="leader-row";row.innerHTML=`${p.name||"Player"} â€” ${p.score}`;P.appendChild(row)});
}
function renderBank(){const b=$("bank");b.innerHTML="";bankLetters.forEach((ch,i)=>{let d=document.createElement("div");d.className="chip";d.draggable=true;d.textContent=ch;d.addEventListener("dragstart",e=>e.dataTransfer.setData("text/plain","bank:"+i));b.appendChild(d)})}
function renderSlots(){const wrap=$("slotsWrap");wrap.innerHTML="";TARGET.split("").forEach((ch,i)=>{let d=document.createElement("div");d.className="slot"+(slotLetters[i]?" fill":"");d.dataset.i=i;d.textContent=slotLetters[i]||"";d.addEventListener("dragover",e=>e.preventDefault());d.addEventListener("drop",e=>{let data=e.dataTransfer.getData("text/plain");if(data.startsWith("bank:")){let idx=+data.split(":")[1];slotLetters[i]=bankLetters[idx];bankLetters.splice(idx,1)}renderSlots();renderBank()});wrap.appendChild(d)})}

/* ========= Selection ========= */
let selecting=false,start=null,selCells=[];
function cellAt(ev){const t=ev.target.closest(".cell");if(!t)return null;return{r:+t.dataset.r,c:+t.dataset.c,el:t}}
function line(sr,sc,er,ec){let dr=Math.sign(er-sr),dc=Math.sign(ec-sc);if(!(dr===0||dc===0||Math.abs(er-sr)===Math.abs(ec-sc)))return[];let len=Math.max(Math.abs(er-sr),Math.abs(ec-sc))+1;return Array.from({length:len},(_,i)=>({r:sr+i*dr,c:sc+i*dc}))}
function startSel(ev){let p=cellAt(ev);if(!p)return;selecting=true;start=p;selCells=[{r:p.r,c:p.c}];highlight()}
function moveSel(ev){if(!selecting)return;let p=cellAt(ev);if(!p)return;selCells=line(start.r,start.c,p.r,p.c);highlight()}
function endSel(){if(!selecting)return;selecting=false;let word=selCells.map(p=>board[p.r][p.c].letter).join(""),rev=[...word].reverse().join("");let match=placedWords.find(w=>!w.found&&(w.word===word||w.word===rev));if(match){selCells.forEach(p=>board[p.r][p.c].found=true);match.found=true;let pts=match.word.length;if(players[0])players[0].score+=pts;if(teams[0])teams[0].score+=pts;bankLetters.push(match.word[0]);shuffle(bankLetters);renderBoard();renderWords();renderLeader();renderBank();renderSlots();updateHUD()}document.querySelectorAll(".cell.sel").forEach(e=>e.classList.remove("sel"))}
function highlight(){document.querySelectorAll(".cell.sel").forEach(e=>e.classList.remove("sel"));selCells.forEach(p=>document.querySelector(`.cell[data-r="${p.r}"][data-c="${p.c}"]`)?.classList.add("sel"))}

/* ========= HUD ========= */
function updateHUD(){$("hudLeft").textContent=placedWords.filter(w=>!w.found).length;$("hudTimer").textContent=fmt(time);$("hudBest").textContent=best?fmt(best):"--:--"}

/* ========= Timer ========= */
function startTimer(){clearInterval(timer);time=600;timer=setInterval(()=>{time--;updateHUD();if(time<=0)clearInterval(timer)},1000)}
function stopTimer(){clearInterval(timer)}
function resetGame(){clearInterval(timer);players.forEach(p=>p.score=0);teams.forEach(t=>t.score=0);bankLetters=[];slotLetters=Array.from(TARGET,()=> "");newBoard();renderLeader();renderBank();renderSlots();updateHUD()}

/* ========= Init ========= */
$("btnShuffle").onclick=newBoard;$("btnStart").onclick=startTimer;$("btnStop").onclick=stopTimer;$("btnReset").onclick=resetGame;
$("btnNewPlayer").onclick=()=>{players.push({name:"Player "+(players.length+1),score:0});renderLeader()};
$("btnNewTeam").onclick=()=>{teams.push({name:"Team "+(teams.length+1),score:0});renderLeader()};
$("grid").addEventListener("mousedown",startSel);$("grid").addEventListener("mousemove",moveSel);document.addEventListener("mouseup",endSel);
newBoard();

/* ========= QR ========= */
new QRCode(document.getElementById("qrcode"),{text:window.location.origin+window.location.pathname,width:128,height:128,colorDark:"#E60000",colorLight:"#ffffff"});
</script>
</body>
</html>

<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>Vodafone Wordsearch</title>
<style>
  :root{
    --voda-red:#E60000; --bg:#0c0d10; --panel:#14161a; --muted:#9aa0a6;
    --grid:#2b2e33; --good:#16a34a; --bad:#dc2626; --chip:#1f2226;
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:#fff;font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif}
  .container{max-width:1200px;margin:0 auto;padding:16px}
  .topbar{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;margin-bottom:12px}
  .brand{display:flex;gap:12px;align-items:center}
  .logo{width:40px;height:40px;border-radius:50%;background:var(--voda-red)}
  .title{font-weight:900;font-size:22px}
  .toolbar{display:flex;gap:8px;flex-wrap:wrap}
  .btn{border:none;padding:8px 12px;border-radius:10px;font-weight:700;cursor:pointer}
  .btn-primary{background:var(--voda-red);color:#fff}
  .btn-ghost{background:#1a1c20;color:#fff}
  .card{background:var(--panel);border:1px solid #24262b;border-radius:14px;margin-bottom:12px}
  .card-header{padding:12px 14px;border-bottom:1px solid #24262b;font-weight:800}
  .card-content{padding:14px}
  .grid{display:grid;gap:0;user-select:none}
  .cell{width:36px;height:36px;display:flex;align-items:center;justify-content:center;font-weight:900;font-size:16px;
        border:1px solid #24262b;cursor:pointer;background:#101217;color:#e9eaed}
  .cell.sel{background:rgba(230,0,0,0.25)}
  .cell.found{background:var(--voda-red);color:#fff}
  .list{list-style:none;padding:0;margin:0;display:grid;gap:6px}
  .list li{padding:6px;border:1px solid #2a2c31;border-radius:8px;background:#0f1013}
  .list li.found{color:var(--muted);text-decoration:line-through}
  .bank{display:flex;gap:8px;flex-wrap:wrap;padding:8px;border:1px dashed #2a2c31;border-radius:10px;background:#0c0d10}
  .chip{min-width:36px;height:36px;display:flex;align-items:center;justify-content:center;font-weight:900;border-radius:6px;background:var(--chip)}
  .slots{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
  .slot{width:44px;height:44px;border:2px dashed #2a2c31;display:flex;align-items:center;justify-content:center;font-size:20px;color:#6b7280;border-radius:8px}
  .slot.fill{border-style:solid;color:#fff;background:#1a1c20}
  .leader-row{display:flex;justify-content:space-between;padding:6px;border:1px solid #2a2c31;border-radius:8px;background:#0f1013;margin-top:4px}
</style>
</head>
<body>
<!-- QR Code Panel -->
<div id="qrPanel" style="position:fixed;top:10px;left:10px;z-index:999;background:#fff;padding:8px;border-radius:8px;text-align:center;box-shadow:0 0 10px rgba(0,0,0,0.2);">
<div id="qrcode"></div>
<div style="font-size:12px;color:#555;margin-top:4px;">ðŸ“± Scan Me</div>
</div>
<div class="container">
<div class="topbar">
<div class="brand">
<div class="logo"></div>
<div class="title">Vodafone Wordsearch</div>
</div>
<div class="toolbar">
<button class="btn btn-ghost" id="btnShuffle">Shuffle</button>
<button class="btn btn-primary" id="btnStart">Start</button>
<button class="btn btn-ghost" id="btnStop">Stop</button>
<button class="btn btn-ghost" id="btnReset">Reset</button>
<button class="btn btn-ghost" id="btnNewPlayer">Add Player</button>
<button class="btn btn-ghost" id="btnNewTeam">Add Team</button>
<span id="hudTimer">10:00</span>
</div>
</div>
<div class="card">
<div class="card-header">Puzzle</div>
<div class="card-content" style="display: flex; gap: 24px; align-items: flex-start;">
<div class="grid" id="grid"></div>
<div><div class="card">
<div class="card-header">Final Phrase</div>
<div class="card-content">
<div class="bank" id="bank"></div>
<div class="slots" id="slotsWrap"></div>
</div>
</div><div class="card">
<div class="card-header">Words to Find</div>
<div class="card-content">
<ul class="list" id="wordList"></ul>
</div>
</div></div></div>
</div>


<div class="card">
<div class="card-header">Leaderboard</div>
<div class="card-content">
<div id="leader"></div>
</div>
</div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<script>
// QR Code fixed to GitHub Pages
new QRCode(document.getElementById("qrcode"), {
    text: "https://saturncapricornsquid.github.io/CSANDLCA/",
    width: 120,
    height: 120,
    colorDark : "#E60000",
    colorLight : "#ffffff",
    correctLevel : QRCode.CorrectLevel.H
});

// ============================
// Game Config
// ============================
const GRID_SIZE = 15;
const WORDS = [
  {word:"CORE", hint:"Backbone of the network layer"},
  {word:"SITETRACKER", hint:"Deployment operations tool"},
  {word:"ALLOCATION", hint:"Assigning resources to tasks"},
  {word:"NCT", hint:"System for site allocation (abbr.)"},
  {word:"DELIVERY", hint:"Phase where circuits are provisioned"},
  {word:"LCA", hint:"Pre-build setup team (abbr.)"},
  {word:"CRQ", hint:"Formal change request code (abbr.)"},
  {word:"AUDIT", hint:"Action to ensure accurate site data"},
  {word:"TESTING", hint:"Verifying that a new configuration or service behaves as expected before deployment"},
  {word:"ESCALATION", hint:"Raising a fault or issue to higher-level support or management"},
  {word:"ACHIEVEMENTS", hint:"Successful delivery milestone like completing a logical configuration or resolving a critical fault"},
  {word:"METRIC", hint:"Performance indicators used to track rollout speed, fault resolution, or service uptime"},
];
// Corrected final phrase (slots hidden at start)
const TARGET_PHRASE = "CSANDLCA";

// ============================
// State
// ============================
let board = [];
let placedWords = [];
let bankLetters = [];
let slotLetters = Array.from(TARGET_PHRASE, ch => ch===' ' ? ' ' : '');
let timeRemaining = 600; // 10:00
let gameTimer = null;

// ============================
// Utils
// ============================
const $ = id => document.getElementById(id);
function rand(n){return Math.floor(Math.random()*n);}
function shuffle(a){for(let i=a.length-1;i>0;i--){const j=rand(i+1);[a[i],a[j]]=[a[j],a[i]];}return a;}
function fmtTime(sec){const m=String(Math.floor(sec/60)).padStart(2,'0');const s=String(sec%60).padStart(2,'0');return `${m}:${s}`;}

// ============================
// Board
// ============================
function newBoard(){
  board = Array.from({length:GRID_SIZE}, ()=>Array.from({length:GRID_SIZE}, ()=>({letter:'',found:false})));
  placedWords = [];
  WORDS.forEach(w=>placeWord(w.word));
  for(let r=0;r<GRID_SIZE;r++) for(let c=0;c<GRID_SIZE;c++) if(!board[r][c].letter) board[r][c].letter = String.fromCharCode(65+rand(26));
  renderBoard(); renderWords();
}
function placeWord(word){
  const dirs = [[0,1],[1,0],[1,1],[1,-1]];
  shuffle(dirs);
  for(let attempt=0;attempt<300;attempt++){
    const [dr,dc] = dirs[attempt%dirs.length];
    const r0 = rand(GRID_SIZE), c0 = rand(GRID_SIZE);
    const cells=[]; let ok=true;
    for(let i=0;i<word.length;i++){
      const r=r0+dr*i, c=c0+dc*i;
      if(r<0||c<0||r>=GRID_SIZE||c>=GRID_SIZE){ok=false;break;}
      const cell=board[r][c];
      if(cell.letter && cell.letter!==word[i]){ok=false;break;}
      cells.push({r,c});
    }
    if(ok){cells.forEach((p,i)=>board[p.r][p.c].letter=word[i]);placedWords.push({word,cells,found:false});return;}
  }
}
function renderBoard(){
  const g=$("grid");
  g.style.gridTemplateColumns=`repeat(${GRID_SIZE},36px)`;
  g.innerHTML="";
  for(let r=0;r<GRID_SIZE;r++)for(let c=0;c<GRID_SIZE;c++){
    const d=document.createElement("div");
    d.className="cell";
    d.dataset.r=r;d.dataset.c=c;
    d.textContent=board[r][c].letter;
    if(board[r][c].found) d.classList.add("found");
    g.appendChild(d);
  }
}
function renderWords(){
  const ul=$("wordList"); ul.innerHTML="";
  placedWords.forEach(w=>{
    const li=document.createElement("li");
    if(w.found) li.classList.add("found");
    li.textContent=`${w.word} â€” ${WORDS.find(x=>x.word===w.word)?.hint||""}`;
    ul.appendChild(li);
  });
}

// ============================
// Final Phrase
// ============================
function renderSlots(){
  const wrap=$("slotsWrap"); wrap.innerHTML="";
  Array.from(TARGET_PHRASE).forEach((ch,i)=>{
    const slot=document.createElement("div");
    slot.className="slot"+(slotLetters[i]?" fill":"");
    slot.textContent=slotLetters[i]||"";
    wrap.appendChild(slot);
  });
}
function renderBank(){
  const b=$("bank"); b.innerHTML="";
  bankLetters.forEach(ch=>{
    const d=document.createElement("div");d.className="chip";d.textContent=ch;b.appendChild(d);
  });
}

// ============================
// Timer
// ============================
function startTimer(){clearInterval(gameTimer);gameTimer=setInterval(()=>{timeRemaining--;$("hudTimer").textContent=fmtTime(timeRemaining);if(timeRemaining<=0)clearInterval(gameTimer);},1000);}
function stopTimer(){clearInterval(gameTimer);}
function resetTimer(){clearInterval(gameTimer);timeRemaining=600;$("hudTimer").textContent=fmtTime(timeRemaining);}

// ============================
// Init
// ============================
$("btnShuffle").onclick=newBoard;
$("btnStart").onclick=startTimer;
$("btnStop").onclick=stopTimer;
$("btnReset").onclick=()=>{resetTimer();newBoard();renderSlots();renderBank();};

function boot(){newBoard();renderSlots();renderBank();resetTimer();}
boot();</script>
</body>
</html>

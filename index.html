<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vodafone Wordsearch</title>
<style>
  :root {
    --vf-red:#E60000;
    --bg:#0c0d10;
    --panel:#14161a;
    --muted:#9aa0a6;
  }
  *{box-sizing:border-box}
  body {
    margin:0;
    font-family: Inter, Arial, sans-serif;
    background:var(--bg);
    color:#fff;
  }
  .topbar {
    display:flex;
    flex-wrap:wrap;
    justify-content:space-between;
    align-items:center;
    padding:10px 16px;
    background:var(--panel);
    border-bottom:2px solid #24262b;
  }
  .brand {
    display:flex;
    align-items:center;
    gap:10px;
  }
  .logo {
    width:40px;height:40px;
    border-radius:50%;
    background:var(--vf-red);
  }
  .title { font-weight:900; font-size:20px }
  .subtitle { font-size:13px; color:var(--muted) }
  .toolbar {
    display:flex;flex-wrap:wrap;gap:8px;
  }
  .btn {
    background:#1a1c20;
    border:1px solid #2a2c31;
    color:#fff;
    padding:6px 10px;
    border-radius:8px;
    font-weight:700;
    cursor:pointer;
  }
  .btn-primary{background:var(--vf-red);border-color:var(--vf-red)}
  .container {
    display:grid;
    grid-template-columns:1fr 340px;
    gap:12px;
    padding:12px;
  }
  @media(max-width:900px){.container{grid-template-columns:1fr}}
  .card {
    background:var(--panel);
    border:1px solid #24262b;
    border-radius:10px;
    overflow:hidden;
  }
  .card-header {
    padding:10px 14px;
    font-weight:900;
    border-bottom:1px solid #24262b;
  }
  .card-content{padding:10px 14px}
  .grid {
    display:grid;
    gap:0;
    user-select:none;
    justify-content:center;
  }
  .cell {
    width:28px;height:28px;
    display:flex;align-items:center;justify-content:center;
    font-weight:700;font-size:15px;
    border:1px solid #24262b;
    background:#101217;
    cursor:pointer;
  }
  .cell.sel { background:rgba(230,0,0,.25) }
  .cell.found { background:var(--vf-red);color:#fff }
  .list {list-style:none;margin:0;padding:0;display:grid;gap:6px}
  .list li{padding:6px;border:1px solid #2a2c31;border-radius:6px;background:#0f1013}
  .list li.found{opacity:0.6;text-decoration:line-through}
  .leader-row{display:flex;justify-content:space-between;padding:6px;border:1px solid #2a2c31;border-radius:6px;background:#0f1013;margin-bottom:4px}
  #qrBox{
    position:fixed;
    top:10px;left:10px;
    background:#fff;
    border-radius:8px;
    padding:6px;
    text-align:center;
    z-index:999;
    box-shadow:0 2px 6px rgba(0,0,0,.4);
  }
  #qrcode{width:120px;height:120px}
  #qrBox div{font-size:12px;font-weight:700;color:var(--vf-red);margin-top:2px}
  .slots{display:flex;gap:6px;flex-wrap:wrap;justify-content:center;margin-top:8px}
  .slot{width:36px;height:36px;border:2px dashed #444;display:flex;align-items:center;justify-content:center;font-weight:900;font-size:18px;color:#999}
  .slot.fill{border-style:solid;color:#fff}
</style>
</head>
<body>
<!-- QR Code -->
<div id="qrBox">
  <div id="qrcode"></div>
  <div>üì± Scan Me</div>
</div>

<div class="topbar">
  <div class="brand">
    <div class="logo"></div>
    <div>
      <div class="title">Vodafone Wordsearch</div>
      <div class="subtitle">Multiplayer Edition</div>
    </div>
  </div>
  <div class="toolbar">
    <button class="btn btn-ghost" id="btnShuffle">Shuffle</button>
    <button class="btn btn-primary" id="btnStart">Start</button>
    <button class="btn" id="btnStop">Stop</button>
    <button class="btn" id="btnReset">Reset</button>
    <button class="btn" id="btnNewPlayer">Add Player</button>
    <button class="btn" id="btnNewTeam">Add Team</button>
    <span class="btn">‚è± <span id="hudTimer">10:00</span></span>
  </div>
</div>

<div class="container">
  <div class="card">
    <div class="card-header">Puzzle</div>
    <div class="card-content">
      <div id="grid" class="grid"></div>
    </div>
  </div>

  <div class="card">
    <div class="card-header">Info Panel</div>
    <div class="card-content">
      <h3>Leaderboard</h3>
      <div id="leader"></div>
      <h3>Teams</h3>
      <div id="teamList"></div>
      <h3>Players</h3>
      <div id="playerList"></div>
      <h3>Final Phrase</h3>
      <div id="slotsWrap" class="slots"></div>
      <h3>Words</h3>
      <ul id="wordList" class="list"></ul>
    </div>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<script>
// Config
const GRID_SIZE = 15;
const WORDS = [
  {word:"CORE", hint:"Backbone of the network layer"},
  {word:"SITETRACKER", hint:"Deployment operations tool"},
  {word:"ALLOCATION", hint:"Assigning responsibilities"},
  {word:"NCT", hint:"Site allocation system"},
  {word:"DELIVERY", hint:"Phase where sites go live"},
  {word:"LCA", hint:"Team setting up pre-build"},
  {word:"CRQ", hint:"Change request code"},
  {word:"AUDIT", hint:"Ensures accurate site data"},
  {word:"TEAM", hint:"Collaboration is key"}
];
const TARGET_PHRASE = "CSANDLCA TEAM";

// State
let board = [];
let placedWords=[];
let slotLetters = Array.from(TARGET_PHRASE, ch => ch===' ' ? ' ' : '');
let timeRemaining=600, timer=null;

// Utilities
const $=id=>document.getElementById(id);
const rand=n=>Math.floor(Math.random()*n);
function shuffle(a){for(let i=a.length-1;i>0;i--){const j=rand(i+1);[a[i],a[j]]=[a[j],a[i]];}return a;}
function fmtTime(sec){const m=String(Math.floor(sec/60)).padStart(2,'0');const s=String(sec%60).padStart(2,'0');return `${m}:${s}`;}

// Board
function newBoard(){
  board=Array.from({length:GRID_SIZE},()=>Array.from({length:GRID_SIZE},()=>({letter:'',found:false})));
  placedWords=[];
  WORDS.forEach(w=>placeWord(w.word));
  for(let r=0;r<GRID_SIZE;r++){
    for(let c=0;c<GRID_SIZE;c++){
      if(!board[r][c].letter) board[r][c].letter=String.fromCharCode(65+rand(26));
    }
  }
  renderBoard(); renderWords(); renderSlots();
}
function placeWord(word){
  const dirs=[[0,1],[1,0],[1,1],[1,-1],[-1,0],[0,-1],[-1,-1],[-1,1]];
  shuffle(dirs);
  for(let tries=0;tries<400;tries++){
    const [dr,dc]=dirs[tries%dirs.length];
    const r0=rand(GRID_SIZE),c0=rand(GRID_SIZE);
    const cells=[];let ok=true;
    for(let i=0;i<word.length;i++){
      const r=r0+dr*i,c=c0+dc*i;
      if(r<0||c<0||r>=GRID_SIZE||c>=GRID_SIZE){ok=false;break;}
      const cell=board[r][c];
      if(cell.letter && cell.letter!==word[i]){ok=false;break;}
      cells.push({r,c});
    }
    if(ok){cells.forEach((p,i)=>board[p.r][p.c].letter=word[i]);placedWords.push({word,cells});return;}
  }
}

// Render
function renderBoard(){
  const g=$("grid");
  g.style.gridTemplateColumns=`repeat(${GRID_SIZE},28px)`;
  g.innerHTML="";
  for(let r=0;r<GRID_SIZE;r++){
    for(let c=0;c<GRID_SIZE;c++){
      const d=document.createElement("div");
      d.className="cell";
      d.dataset.r=r;d.dataset.c=c;
      d.textContent=board[r][c].letter;
      g.appendChild(d);
    }
  }
}
function renderWords(){
  const ul=$("wordList"); ul.innerHTML="";
  placedWords.forEach(w=>{
    const li=document.createElement("li");
    li.textContent=w.word+" ‚Äî "+(WORDS.find(x=>x.word===w.word)?.hint||"");
    ul.appendChild(li);
  });
}
function renderSlots(){
  const wrap=$("slotsWrap"); wrap.innerHTML="";
  Array.from(TARGET_PHRASE).forEach((ch,i)=>{
    const d=document.createElement("div");
    d.className="slot"+(slotLetters[i]?" fill":"");
    d.textContent=slotLetters[i]||"";
    wrap.appendChild(d);
  });
}

// Timer
function startTimer(){
  clearInterval(timer); timeRemaining=600;
  timer=setInterval(()=>{
    timeRemaining--;
    $("hudTimer").textContent=fmtTime(timeRemaining);
    if(timeRemaining<=0){clearInterval(timer);alert("‚è± Time's up!");}
  },1000);
}
function stopTimer(){clearInterval(timer);}
function resetTimer(){clearInterval(timer);timeRemaining=600;$("hudTimer").textContent="10:00";}

// Controls
$("btnShuffle").onclick=newBoard;
$("btnStart").onclick=startTimer;
$("btnStop").onclick=stopTimer;
$("btnReset").onclick=()=>{resetTimer();newBoard();};

// Boot
newBoard();
resetTimer();

// QR
new QRCode(document.getElementById("qrcode"),{
  text:"https://saturncapricornsquid.github.io/CSANDLCA/",
  width:120,height:120,
  colorDark:"#E60000",colorLight:"#FFFFFF",
  correctLevel:QRCode.CorrectLevel.H
});
</script>
</body>
</html>
